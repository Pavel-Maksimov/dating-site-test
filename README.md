
# dating-site-test
## Описание проекта
Dating - тестовый проект бекэнда для сайта знакомств в архитектуре REST.<br>
После регистрации и авторизации пользователи могут просматривать список других пользователей и оценивать их. При просмотре списка пользователей можно приметить фильтрацию по полу, имени, фамилии и расстоянию от пользователя. При совпадении положительных оценок двух пользователей им отправляется сообщение о взаимности.<br>
________
Регистрация пользователя:<br> 
URL: **/api/clients/create/**<br> 
Пользователь отправляет POST-запрос с параметрами:<br>
*email* - электронная почта<br>
*first_name* - имя<br>
*last_name* - фамилия<br>
*gender* - пол<br>
*avatar* - картинка на аватарку, закодированная в Base64<br>
*password* - пароль<br>
*longitude*, *latitude* - широта и долгота места проживания<br>
В ответ на данный запрос данные пользователя как подтверждение регистрации.<br><br>
Авторизация:<br>
URL: **/api/auth/token/login/**<br>
Пользователь отправляет POST-запрос с параметрами:<br>
*email* - электронная почта<br>
*password* - пароль<br>
В ответ на данный запрос пользователь получает токен авторизации, который необходимо передавать в заголовке каждого запроса:<br>
"Authorization": "Token <полученный токен>".<br><br>
После регистрации и получения токена пользователь может отправлять запросы на следующие эндпоинты:<br><br>
Просмотр списка пользователей (GET-запрос):<br>
URL: **/api/list/**<br>
Для фильтрации можно применить следующие параметры GET-запроса:<br>
*gender* - пол<br>
*first_name* - имя<br>
*last_name* - фамилия<br>
*distance* - расстояние в км.<br>
Пример:<br>
*/api/list/?distance=3000&gender=женский*<br><br>
Оценка другого пользователя:<br>
URL: **/api/clients/{id пользователя}/match/**<br>
Пользователь отправляет POST-запрос с параметрами:<br>
*like* - принимает 2 варианта значения - "true" - если пользователь понравился, или "false" - если пользователь не понравился.<br><br>
Если 2 пользователя положительно друг друга оценивают, то им на электронную почту отправляется сообщение о взаимной симпатии с указанием электронной почты второго пользователя (На стадии разработки и тестировани имитация отправки сообщений с сохранением в файлах).<br><br> 


## Развёртывание проекта <br>
Для развёртывания проекта выполните следующие действия:<br>
```
git clone https://gitlab.com/Pavel-Maksimov/dating-site-test.git
```
Установите виртуальное окружение:
```
sudo apt install python3.8-venv
```
Перейдите в папку с проектом и создайте и активируйте виртуальное окружение. <br>
Для Windows:
```
python3 -m venv venv
source venv/Scripts/activate
```
Для Linux:
```
python -m venv venv
source venv/bin/activate 
```
Установите все необходимые зависимости:
```
(venv)$pip install -r requirements.txt
```
Примените миграции:
```
cd dating/
python manage.py migrate
```
Для запуска сервера выполните команду:
```
(venv)$python manage.py runserver
```
Для остановки сервера используйте сочетание клавиш **Ctrl+C**.<br>
https://dating-site-test.herokuapp.com/api/clients/create/<br>

В директории 'requests_templates' сохранены запоненные шаблоны для запросов, которыми можно воспользоваться для ручного тестирования проекта.<br>
